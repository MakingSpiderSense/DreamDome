<!doctype html>
<html>
<head>
    <title>Synthwave Nights</title>
    <link rel="icon" type="image/png" href="assets/favicon-512.png">
	<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <!-- <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script> -->
    <script src="js/components.js"></script>
</head>

<body>
	<!-- <a-scene vr-mode-ui="enabled: false"> -->
    <a-scene stats>

        <!-- Asset Management System -->
        <a-assets>
            <img id="neon-sky" src="assets/neon-sky-2.jpg">
            <img id="moon" src="assets/moon-3.png">
            <img id="speaker" src="assets/metal_dotted_2-specular.jpg">
        	<audio id="ghosthustlers" src="assets/ghosthustlers--some-elses-ride.mp3"></audio>
            <img id="billboard-front" src="assets/billboard-front.png">
        </a-assets>
        
        <!-- Environment -->
        <a-entity class="env-dream" environment="preset: dream; groundColor: #445; grid: cross; fog: 0; skyType: none;"></a-entity>

        <!-- Sky -->
        <a-sky src="#neon-sky" rotation="0 -90 0"></a-sky>

        <!-- Moon -->
        <a-image class-"moon" src="#moon" position="0 6 -430" scale="440 440 1"></a-image>

        <!-- Billboard -->
        <a-entity class="billboard" position="80 9.5 -16">
            <!-- Poles -->
            <a-entity>
                <a-cylinder color="#333" radius="0.1" position="0 0 -1" scale="2 20 1" rotation="0 90 0"></a-cylinder>
                <a-cylinder color="#333" radius="0.1" position="0 0 0" scale="2 20 1" rotation="0 90 0"></a-cylinder>
                <a-cylinder color="#333" radius="0.1" position="0 0 1" scale="2 20 1" rotation="0 90 0"></a-cylinder>
            </a-entity>
            <!-- Canvas -->
            <a-box color="#fff" width="2.33" scale="9.75 9.75 1" depth=".8" position="0 7.5 0" rotation="0 90 0"></a-box>
            <!-- Poster Front -->
            <a-image src="#billboard-front" scale="10 10 1" width="2.33" rotation="0 -90 0" position="-.75 7.42 0"></a-image>
        </a-entity>

        <!-- Elevator -->
        <a-entity class="elevator">
            <a-entity class="el-glass">
                <a-cylinder class="el-mainbody" position="0 2.5 0" color="white" height="5" opacity=".2" radius="3" geometry="thetaLength: 300; thetaStart: 30;" material="side: double" open-ended="true" material="roughness: 0"></a-cylinder>
                <a-cylinder class="el-door-arc" position="0 4.5 0" color="white" height="1" opacity=".2" radius="3" geometry="thetaLength: 60; thetaStart: -30;" material="side: double" open-ended="true" material="roughness: 0"></a-cylinder>
                <a-cylinder class="el-door" position="0 2.1 0" color="white" height="4.2" opacity=".4" radius="2.9" geometry="thetaLength: 70; thetaStart: -35;" material="side: double" open-ended="true" material="roughness: 0"></a-cylinder>
            </a-entity>
        </a-entity>

        <!-- Speaker -->
        <a-entity class="speaker" position="7 0 8" animation="property: rotation; to: 0 -360 0; loop: true; dur: 30000;">
            <!-- Speaker Body -->
            <a-cylinder color="#333" height="10" scale="1 1 1" rotation="0 0 0" material="src: #speaker; repeat: 9 9; roughness: .7;">
            </a-cylinder>
            <!-- Attached Rings -->
            <a-entity class="rings-attached">
                <a-sphere color="#53e4e1" position="0 4.75 0" radius="1.2" scale="1 .1 1" rotation="10 0 0"></a-sphere>
            </a-entity>
            <!-- Loose Rings -->
            <a-entity class="rings-loose" rotation="90 0 0" position="0 4.3 0">
                <a-entity geometry="primitive: torus; radius: 2; radiusTubular: 0.05;" rotation="20 0 0" scale="1 1 .4" material="color: #53e4e1;"></a-entity>
                <a-entity geometry="primitive: torus; radius: 1.6; radiusTubular: 0.05;" rotation="-30 0 0" scale="1 1 .4" material="color: #fc20e2;"
                    animation="property: rotation; to: 0 0 0; loop: true; dur: 10000; easing: linear; dir: alternate;">
                </a-entity>
            </a-entity>
        </a-entity>
        <!-- Power Switch -->
        <a-entity class="power-switch" position="7 0 8">
            <!-- Base -->
            <a-sphere class="ps-base" color="#1a1a1a" radius="1.4" scale="1 .4 1"></a-sphere>
            <!-- Button -->
            <a-entity class="ps-btn" rotation="39.7 51.4 122.8" position="-1.01 .2 -.79" scale=".2 .2 .2">
                <a-entity id="ps-torus" geometry="primitive: torus; radius: .5; radiusTubular: 0.05; arc: 300" material="color: #53e4e1; opacity: .2;"></a-entity>
                <a-entity id="ps-cone" geometry="primitive: cone; height: .8; radiusBottom: .05; radiusTop: .2;" material="color: #53e4e1; opacity: .2;" scale=".7 .7 1" rotation="0 0 -120" 
                    position=".285 -.16 0">
                </a-entity>
                <a-sphere id="ps-btn-hitbox" class="clickable" toggle-music material="opacity: 0;" sound="src: #ghosthustlers; volume: 3; refDistance: 5; rolloffFactor: .3">
                </a-sphere>
            </a-entity>
        </a-entity>

		<!-- Camera Rig -->
		<a-entity class="user" position="0 0 6" movement-controls="speed: 0.5;">
			<!-- Camera -->
			<a-entity camera position="0 1.6 0"
					  look-controls="pointerLockEnabled: false"
                      wasd-controls="acceleration: 50">
                    <!-- Cursor -->
                    <a-entity cursor position="0 0 -1"
                                geometry="primitive: sphere; radius: 0.005"
                                material="color: #FFFFFF; shader: flat; opacity: 0.5"
                                raycaster="objects: .clickable">
                    </a-entity>
			</a-entity>
            <!-- Controllers -->
            <a-entity class="controllers">
                <a-entity oculus-touch-controls="hand: left"></a-entity>
                <a-entity oculus-touch-controls="hand: right"></a-entity>
            </a-entity>
        </a-entity>

    </a-scene>

</body>
</html>